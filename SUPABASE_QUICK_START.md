# ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ú–∏–≥—Ä–∞—Ü–∏—è Supabase

## üéØ –î–ª—è Supabase (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ù–µ –Ω—É–∂–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π PostgreSQL!** –ò—Å–ø–æ–ª—å–∑—É–π Supabase SQL Editor.

---

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –û—Ç–∫—Ä–æ–π Supabase Dashboard
- –ü–µ—Ä–µ–π–¥–∏: https://supabase.com/dashboard
- –í–æ–π–¥–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç
- –í—ã–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç (–∏–ª–∏ —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π)

### 2. –û—Ç–∫—Ä–æ–π SQL Editor
- –í –ª–µ–≤–æ–º –º–µ–Ω—é: **SQL Editor**
- –ù–∞–∂–º–∏ –Ω–∞ **"New query"** –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ä–µ–¥–∞–∫—Ç–æ—Ä

### 3. –°–∫–æ–ø–∏—Ä—É–π –∏ –≤—Å—Ç–∞–≤—å –∫–æ–¥
- –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª: **`SUPABASE_FULL_MIGRATION.sql`**
- –°–∫–æ–ø–∏—Ä—É–π **–≤–µ—Å—å –∫–æ–¥** (Ctrl+A, Ctrl+C)
- –í—Å—Ç–∞–≤—å –≤ SQL Editor (Ctrl+V)

### 4. –ó–∞–ø—É—Å—Ç–∏ –º–∏–≥—Ä–∞—Ü–∏—é
- –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **"Run"** (–∏–ª–∏ Ctrl+Enter / Cmd+Enter)
- –î–æ–∂–¥–∏—Å—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (1-5 —Å–µ–∫—É–Ω–¥)

### 5. –ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: **"Success"** –∏–ª–∏ **"Success. No rows returned"**
- –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ ‚Äî –ø—Ä–æ—á–∏—Ç–∞–π –∏—Ö

---

## ‚úÖ –ß—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –º–∏–≥—Ä–∞—Ü–∏—è

### –¢–∞–±–ª–∏—Ü—ã:
- ‚úÖ `profiles` ‚Äî –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `chat_sessions` ‚Äî —Å–µ—Å—Å–∏–∏ —á–∞—Ç–∞ (—Å `voice_id`)
- ‚úÖ `chat_messages` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ `billing_subscriptions` ‚Äî –ø–æ–¥–ø–∏—Å–∫–∏

### –§—É–Ω–∫—Ü–∏–∏:
- ‚úÖ `handle_new_user()` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ `is_admin()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω-–ø—Ä–∞–≤
- ‚úÖ `set_updated_at()` ‚Äî –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—ã

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ RLS (Row Level Security) –≤–∫–ª—é—á–µ–Ω
- ‚úÖ –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
AND table_name IN ('profiles', 'chat_sessions', 'chat_messages', 'billing_subscriptions');

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ voice_id
SELECT column_name 
FROM information_schema.columns 
WHERE table_name = 'chat_sessions' 
AND column_name = 'voice_id';
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:** –í—Å–µ 4 —Ç–∞–±–ª–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç, –∫–æ–ª–æ–Ω–∫–∞ `voice_id` –µ—Å—Ç—å.

---

## ‚ö†Ô∏è –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç

–ú–∏–≥—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `IF NOT EXISTS` –∏ `IF EXISTS` ‚Äî –æ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º.

---

## üöÄ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:
1. –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π API
3. –ó–∞–¥–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~1-2 –º–∏–Ω—É—Ç—ã  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ü—Ä–æ—Å—Ç–∞—è  
**–†–∏—Å–∫:** –ù–∏–∑–∫–∏–π


